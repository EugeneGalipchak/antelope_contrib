.TH DBDEC 1 "$Date$"
.SH NAME
dbdec \- Decimate waveform data
.SH SYNOPSIS
.B dbdec
.I [-sift sift_expr]
.I [-c calper]
.I [-wfdir wfdir]
.I [-f format]
.I dbin
.I dbout
.I chan_maps
.I dec_stage1
.I [dec_stage2
.I ...]
.SH DESCRIPTION
.B dbdec
will decimate waveform data.
This program will only work with v. 3.0 of the CSS schema.
.SH COMMAND LINE ARGUMENTS
.TP 15
\fI-sift sift_expr\fP
A sifting expression to be applied to the input \fBwfdisc\fP table
for determining which waveform segments to process.
This should be formed as a normal expression, such as \fB'sta == "AAK"'\fP
to get just the waveform segments for station AAK. Note that the channel mappings
also effectively sift the data.
This argument is optional and if it is ommitted, then all waveforms are processed
subject to the channel mappings.
.TP 15
\fI-c calper\fP
If this argument is specified, then the \fBcalib\fP and \fBcalper\fP values in
the output \fBwfdisc\fP table will be recomputed according to the specified
\fIcalper\fP value. In addition the instrument response files will be modified
to reflect the new normalization value.
This argument is optional and if it is ommitted, then the \fBcalib\fP, \fBcalper\fP
and instrument response normalizations remain unchanged. Note that the decimation
FIR stages are always included to produce new instrument response files
for the decimated waveforms.
.TP 15
\fI-wfdir wfdir\fP
The \fIwfdir\fP argument specifies where the output waveform files are
to be stored. The \fBdir\fP entry in the output \fBwfdisc\fP table is
generated by concatenating the \fIwfdir\fP argument with the \fBdir\fP
entry from the input \fBwfdisc\fP table. If the \fIwfdir\fP specification
is of the form \fI:stringi:stringo:\fP, then a string substitution
is attempted on the \fBdir\fP entry from the input \fBwfdisc\fP table
to form the \fBdir\fP entry in the output \fBwfdisc\fP table.
This argument is optional and if it is ommitted, then the output decimated
waveform file directory tree will be the same as the input tree. Note that
in this case, in order to avoid file collisions,
the \fBdir\fP path in the input \fBwfdisc\fP tables must be
relative (not absolute) and the output database \fBwfdisc\fP file must be
in a different directory than the input \fBwfdisc\fP file.
.TP 15
\fI-f format\fP
The format for the decimated waveform data. This should be a normal 
\fBdatatype\fP value, such as \fIs2\fP, \fIs4\fP, \fIt4\fP, etc.
This argument is optional and if it is ommited, then the output format
is the same as the input format.
.TP 15
\fIdbin\fP
The name of the input database. 
This argument is required.
.TP 15
\fIdbout\fP
The name of the output database. 
This argument is required.
.TP 15
\fIchan_maps\fP
A list of channel code mappings. This is a comma separated list of the form
\fIoutchan1=inchan1,outchan2=inchan2,...\fP with no embedded
white space that describes how input channel codes are mapped to output
channel codes. Only the input channels in this list will be processed.
If the output channel code is the same as the input channel code, then
the output database, \fIdbout\fP, must be different from the input
database, \fIdbin\fP. An example of this argument is
.br
\fISHN=EHN,SHE=EHE,SHZ=EHZ\fP
.br
This argument is required.
.TP 15
\fIdec_stage [dec_stage2 ...]\fP
A set of decimation stage response files. This list of file names refers
to one or more decimation stages that are to be applied to the data.
Each response stage file is assumed to contain the coefficients for
a normalized FIR filter in CSS response file format.
At least one stage must be specified.
.SH SEE ALSO
dbex_eval(3)
.SH "BUGS AND CAVEATS"
Will now read miniseed (sd) input data but output will be t4.  
Should make output format always a clone of input, which is the
behaviour for other formats.  

.\" $Id$ 
